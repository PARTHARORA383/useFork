{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "stopwatch",
  "type": "registry:block",
  "title": "Stopwatch",
  "description": "A responsive and animated stopwatch component built with Motion. Features smooth layout transitions, start/pause/reset functionality, and fluid time updates for an engaging and interactive user experience. Ideal for dashboards, timers, and productivity tools.",
  "dependencies": ["motion", "animate-ui/icons-icon"],
  "files": [
    {
      "path": "components/stopwatch.tsx",
      "content": "'use client';\n\nimport React, { useState, useEffect, useRef, HTMLAttributes } from 'react';\nimport { AnimateIcon } from './animate-ui/icons/icon';\nimport { animate, AnimatePresence, motion, MotionProps } from 'framer-motion';\nimport { ChevronLeft } from './animate-ui/icons/chevron-left';\nimport { AudioLines } from './animate-ui/icons/audio-lines';\nimport { RefreshCw } from './animate-ui/icons/refresh-cw';\nimport { Play } from './animate-ui/icons/play';\nimport { Timer } from './animate-ui/icons/timer';\n\nexport const Stopwatch = () => {\n  const [time, setTime] = useState(0); // time in milliseconds\n  const [isRunning, setIsRunning] = useState(false);\n  const [isActive, setIsActive] = useState(false);\n  const [isHover, setIsHover] = useState(false);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (isRunning) {\n      intervalRef.current = setInterval(() => {\n        setTime((prev) => prev + 10);\n      }, 10);\n    } else if (!isRunning && intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n\n    return () => {\n      if (intervalRef.current) clearInterval(intervalRef.current);\n    };\n  }, [isRunning]);\n\n  // format time as mm:ss:ms\n  const formatTime = (time: number) => {\n    // Convert total milliseconds into hours, minutes, seconds, milliseconds\n    const hours = Math.floor(time / 3600000);\n    const minutes = Math.floor((time % 3600000) / 60000);\n    const seconds = Math.floor((time % 60000) / 1000);\n    const milliseconds = Math.floor((time % 1000) / 10);\n\n    // Helper function to pad numbers to 2 digits (e.g., 7 -> \"07\")\n    const pad = (n: number) => n.toString().padStart(2, '0');\n\n    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;\n  };\n  const handleReset = () => {\n    setIsRunning(false);\n\n    // Animate the \"rolling\" effect\n    const startValue = time;\n    const endValue = 0;\n    const overshoot = startValue + 3000; // extra roll feel\n    const duration = 1.2; // total animation duration (seconds)\n\n    const controls = animate(0, 1, {\n      duration,\n      ease: 'easeInOut',\n      onUpdate: (progress) => {\n        // simulate spinning effect â€” increase first, then decrease to zero\n        const t =\n          progress < 0.5\n            ? startValue + (overshoot - startValue) * (progress * 2)\n            : overshoot - (overshoot - endValue) * ((progress - 0.5) * 2);\n\n        setTime(Math.max(0, Math.floor(t)));\n      },\n      onComplete: () => {\n        setTime(0); // finally set it to zero\n      },\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center\">\n      <motion.div className=\"relative flex justify-center items-center gap-3 p-1 bg-background rounded-lg mb-4 \">\n        <AnimatePresence>\n          {isHover && isRunning && !isActive && (\n            <motion.div\n              layout\n              initial={{ width: 0, opacity: 0 }}\n              animate={{ width: 'auto', opacity: 1 }}\n              exit={{ width: 0, opacity: 0 }}\n              transition={{ duration: 0.4, ease: 'easeInOut' }}\n              className=\"overflow-hidden border rounded-md bg-muted absolute bottom-full mb-2 z-10 origin-left text-sm\"\n            >\n              <motion.div className=\"text-xl font-mono px-2\">{formatTime(time)}</motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {isHover && !isRunning && (\n            <motion.div\n              layout\n              initial={{ opacity: 0, width: 0 }}\n              animate={{ opacity: 1, width: 'auto' }}\n              exit={{ opacity: 1, width: 0 }}\n              transition={{ duration: 0.2, ease: 'easeInOut' }}\n              className=\"absolute z-10 bg-muted bottom-full rounded-lg p-1 px-1.5 border mb-2 overflow-hidden origin-center text-sm \"\n            >\n              StopWatch\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {isActive ? (\n            <motion.div\n              layout\n              key=\"timer\"\n              initial={{ width: 0, opacity: 0 }}\n              animate={{ width: 'auto', opacity: 1 }}\n              exit={{ width: 0, opacity: 0 }}\n              transition={{ duration: 0.4, ease: 'easeInOut' }}\n              className=\"overflow-hidden flex items-center gap-1 origin-center\"\n            >\n              <IconButton\n                title={'Hide'}\n                icon={<ChevronLeft className=\"w-5 h-5\" />}\n                onClick={() => {\n                  setIsActive(false);\n                  setIsHover(false);\n                }}\n              />\n\n              {isRunning ? (\n                <IconButton\n                  title={'Pause'}\n                  icon={\n                    <AnimateIcon animateOnView>\n                      <AudioLines className=\"w-5 h-5\" />\n                    </AnimateIcon>\n                  }\n                  onClick={() => {\n                    setIsRunning(false);\n                    setIsHover(false);\n                  }}\n                />\n              ) : (\n                <IconButton\n                  title={'Play'}\n                  icon={<Play className=\"w-5 h-5\" />}\n                  onClick={() => {\n                    setIsRunning(true);\n                    setIsHover(false);\n                  }}\n                />\n              )}\n              <motion.div className=\"text-xl font-mono px-2 cursor-default\">\n                {formatTime(time)}\n              </motion.div>\n\n              <IconButton\n                title={'Reset'}\n                icon={<RefreshCw animateOnHover className=\"w-5 h-5\" />}\n                onClick={() => {\n                  handleReset();\n                  setIsHover(false);\n                }}\n              />\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"icon\"\n              onClick={() => {\n                setIsActive(true);\n                setIsRunning(true);\n              }}\n              onMouseEnter={() => setIsHover(true)}\n              onMouseLeave={() => setIsHover(false)}\n              className={`p-1 hover:bg-muted  cursor-pointer rounded-lg overflow-hidden origin-right ${isRunning ? 'text-sky-300' : 'text-foreground'}`}\n            >\n              <AnimateIcon animateOnView>\n                <Timer />\n              </AnimateIcon>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n};\n\nconst ani: MotionProps = {\n  variants: {\n    initial: (c: number) => ({\n      transform: `translateX(${20 * (c === 1 ? 1 : -1)}px)`,\n      opacity: 0,\n      filter: 'blur(4px)',\n    }),\n    animate: {\n      transform: 'translateX(0px)',\n      opacity: 1,\n      filter: 'blur(0px)',\n    },\n    exit: (c: number) => ({\n      transform: `translateX(${-40 * (c === 1 ? 1 : -1)}px)`,\n      opacity: 0,\n      filter: 'blur(4px)',\n    }),\n  },\n  initial: 'initial',\n  animate: 'animate',\n  exit: 'exit',\n};\n\ninterface IconButtonProps extends HTMLAttributes<HTMLDivElement> {\n  icon: React.ReactNode;\n  onClick: () => void;\n  title: string;\n}\n\nfunction IconButton({ icon, onClick, title, className, ...props }: IconButtonProps) {\n  const [isHover, setIsHover] = useState(false);\n\n  return (\n    <motion.div\n      onMouseEnter={() => {\n        setIsHover(true);\n      }}\n      onMouseLeave={() => {\n        setIsHover(false);\n      }}\n    >\n      <motion.div\n        {...ani}\n        className=\" p-1 rounded-lg hover:bg-muted4 hover:text-sky-300\"\n        onClick={onClick}\n      >\n        {icon}\n      </motion.div>\n      <AnimatePresence>\n        {isHover && (\n          <motion.div\n            initial={{ opacity: 0, width: 0, y: 0 }}\n            animate={{ opacity: 1, width: 'auto', y: 0 }}\n            exit={{ opacity: 1, width: 0, y: 0 }}\n            transition={{ duration: 0.2, ease: 'easeInOut' }}\n            className=\"overflow-hidden border rounded-md bg-muted absolute px-1.5 py-0.5 bottom-full mb-2 z-10 origin-left text-sm\"\n          >\n            {title}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n",
      "type": "registry:component"
    },
    {
      "path": "components/demo/stopwatch-demo.tsx",
      "content": "'use client';\n\nimport { Stopwatch } from '@/components/stopwatch';\n\nexport function StopwatchDemo() {\n  return (\n    <div>\n      <Stopwatch />\n    </div>\n  );\n}\n\n//Creator - Parth Arora\n//X - https://x.com/partharora9128\n",
      "type": "registry:component"
    }
  ]
}
