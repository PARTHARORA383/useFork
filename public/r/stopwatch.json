{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "stopwatch",
  "type": "registry:block",
  "title": "Stopwatch",
  "description": "An interactive parallax showcase where images drift in dual lanes, elegantly responding to cursor movement and adding a captivating sense of depth. A recreation from the landonorris website.",
  "dependencies": [
    "motion",
    "animate-ui/icons-icon"
  ],
  "files": [
    {
      "path": "components/stopwatch.tsx",
      "content": "\"use client\"\r\n\r\nimport React, { useState, useEffect, useRef, HTMLAttributes } from \"react\";\r\nimport { AnimateIcon } from \"./animate-ui/icons/icon\";\r\nimport { animate, AnimatePresence, motion, MotionProps } from 'framer-motion';\r\nimport { ChevronLeft } from \"./animate-ui/icons/chevron-left\";\r\nimport { AudioLines } from \"./animate-ui/icons/audio-lines\";\r\nimport { RefreshCw } from \"./animate-ui/icons/refresh-cw\";\r\nimport { Play } from \"./animate-ui/icons/play\";\r\nimport { Timer } from \"./animate-ui/icons/timer\";\r\n\r\nexport const Stopwatch = () => {\r\n  const [time, setTime] = useState(0); // time in milliseconds\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [isHover, setIsHover] = useState(false);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isRunning) {\r\n      intervalRef.current = setInterval(() => {\r\n        setTime((prev) => prev + 10);\r\n      }, 10);\r\n    } else if (!isRunning && intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [isRunning]);\r\n\r\n  // format time as mm:ss:ms\r\n  const formatTime = (time: number) => {\r\n    // Convert total milliseconds into hours, minutes, seconds, milliseconds\r\n    const hours = Math.floor(time / 3600000);\r\n    const minutes = Math.floor((time % 3600000) / 60000);\r\n    const seconds = Math.floor((time % 60000) / 1000);\r\n    const milliseconds = Math.floor((time % 1000) / 10);\r\n\r\n    // Helper function to pad numbers to 2 digits (e.g., 7 -> \"07\")\r\n    const pad = (n: number) => n.toString().padStart(2, \"0\");\r\n\r\n    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;\r\n  };\r\n  const handleReset = () => {\r\n    setIsRunning(false);\r\n\r\n    // Animate the \"rolling\" effect\r\n    const startValue = time;\r\n    const endValue = 0;\r\n    const overshoot = startValue + 3000; // extra roll feel\r\n    const duration = 1.2; // total animation duration (seconds)\r\n\r\n    const controls = animate(0, 1, {\r\n      duration,\r\n      ease: \"easeInOut\",\r\n      onUpdate: (progress) => {\r\n        // simulate spinning effect â€” increase first, then decrease to zero\r\n        const t =\r\n          progress < 0.5\r\n            ? startValue + (overshoot - startValue) * (progress * 2)\r\n            : overshoot - (overshoot - endValue) * ((progress - 0.5) * 2);\r\n\r\n        setTime(Math.max(0, Math.floor(t)));\r\n      },\r\n      onComplete: () => {\r\n        setTime(0); // finally set it to zero\r\n      },\r\n    });\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center\">\r\n      <motion.div\r\n        className=\"relative flex justify-center items-center gap-3 p-1 bg-background rounded-lg mb-4 \">\r\n\r\n        <AnimatePresence>\r\n          {isHover && isRunning && !isActive && (\r\n            <motion.div\r\n              layout\r\n              initial={{ width: 0, opacity: 0 }}\r\n              animate={{ width: \"auto\", opacity: 1 }}\r\n              exit={{ width: 0, opacity: 0 }}\r\n              transition={{ duration: 0.4, ease: \"easeInOut\" }}\r\n              className=\"overflow-hidden border rounded-md bg-muted absolute bottom-full mb-2 z-10 origin-left text-sm\"\r\n            >\r\n              <motion.div className=\"text-xl font-mono px-2\">\r\n                {formatTime(time)}\r\n              </motion.div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <AnimatePresence>\r\n          {isHover && !isRunning && <motion.div\r\n            layout\r\n            initial={{ opacity: 0, width: 0 }}\r\n            animate={{ opacity: 1, width: \"auto\" }}\r\n            exit={{ opacity: 1, width: 0 }}\r\n            transition={{ duration: 0.2, ease: \"easeInOut\" }}\r\n            className=\"absolute z-10 bg-muted bottom-full rounded-lg p-1 px-1.5 border mb-2 overflow-hidden origin-center text-sm \"\r\n          >\r\n            StopWatch\r\n          </motion.div>}\r\n        </AnimatePresence>\r\n\r\n\r\n        <AnimatePresence>\r\n          {isActive ? (\r\n            <motion.div\r\n              layout\r\n              key=\"timer\"\r\n              initial={{ width: 0, opacity: 0 }}\r\n              animate={{ width: \"auto\", opacity: 1 }}\r\n              exit={{ width: 0, opacity: 0 }}\r\n              transition={{ duration: 0.4, ease: \"easeInOut\" }}\r\n              className=\"overflow-hidden flex items-center gap-1 origin-center\"\r\n            >\r\n              <IconButton title={\"Hide\"} icon={<ChevronLeft className=\"w-5 h-5\" />} onClick={() => {\r\n                setIsActive(false)\r\n                setIsHover(false)\r\n              }} />\r\n\r\n              {isRunning ?\r\n\r\n                <IconButton title={\"Pause\"} icon={<AnimateIcon animateOnView >\r\n                  <AudioLines className=\"w-5 h-5\" />\r\n                </AnimateIcon>} onClick={() => {\r\n                  setIsRunning(false)\r\n                  setIsHover(false)\r\n                }} />\r\n                :\r\n                <IconButton title={\"Play\"} icon={<Play className='w-5 h-5' />} onClick={() => {\r\n                  setIsRunning(true)\r\n                  setIsHover(false)\r\n                }} />\r\n              }\r\n              <motion.div\r\n                className=\"text-xl font-mono px-2 cursor-default\">\r\n                {formatTime(time)}\r\n              </motion.div>\r\n\r\n              <IconButton title={\"Reset\"} icon={<RefreshCw animateOnHover className=\"w-5 h-5\" />\r\n              } onClick={() => {\r\n                  handleReset()\r\n                setIsHover(false)\r\n              }} />\r\n            </motion.div>\r\n          ) : (\r\n            <motion.div\r\n              key='icon'\r\n              onClick={() => {\r\n                setIsActive(true)\r\n                setIsRunning(true)\r\n              }}\r\n              onMouseEnter={() => setIsHover(true)}\r\n              onMouseLeave={() => setIsHover(false)}\r\n              className={`p-1 hover:bg-muted  cursor-pointer rounded-lg overflow-hidden origin-right ${isRunning ? \"text-sky-300\" : \"text-foreground\"}`} >\r\n              <AnimateIcon animateOnView>\r\n                <Timer />\r\n              </AnimateIcon>\r\n\r\n\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n      </motion.div>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst ani: MotionProps = {\r\n  variants: {\r\n    initial: (c: number) => ({\r\n      transform: `translateX(${20 * (c === 1 ? 1 : -1)}px)`,\r\n      opacity: 0,\r\n      filter: 'blur(4px)',\r\n    }),\r\n    animate: {\r\n      transform: 'translateX(0px)',\r\n      opacity: 1,\r\n      filter: 'blur(0px)',\r\n    },\r\n    exit: (c: number) => ({\r\n      transform: `translateX(${-40 * (c === 1 ? 1 : -1)}px)`,\r\n      opacity: 0,\r\n      filter: 'blur(4px)',\r\n    }),\r\n  },\r\n  initial: 'initial',\r\n  animate: 'animate',\r\n  exit: 'exit',\r\n};\r\n\r\n\r\n\r\ninterface IconButtonProps extends HTMLAttributes<HTMLDivElement> {\r\n  icon: React.ReactNode\r\n  onClick: () => void\r\n  title: string\r\n}\r\n\r\n\r\nfunction IconButton({\r\n  icon,\r\n  onClick,\r\n  title,\r\n  className,\r\n  ...props\r\n}: IconButtonProps) {\r\n\r\n  const [isHover, setIsHover] = useState(false);\r\n\r\n  return (\r\n    <motion.div\r\n      onMouseEnter={() => { setIsHover(true) }}\r\n      onMouseLeave={() => { setIsHover(false) }}\r\n    >\r\n      <motion.div\r\n        {...ani}\r\n        className=\" p-1 rounded-lg hover:bg-muted4 hover:text-sky-300\" onClick={onClick}>\r\n        {icon}\r\n      </motion.div>\r\n      <AnimatePresence>\r\n\r\n        {isHover && <motion.div\r\n\r\n          initial={{ opacity: 0, width: 0, y: 0 }}\r\n          animate={{ opacity: 1, width: \"auto\", y: 0 }}\r\n          exit={{ opacity: 1, width: 0, y: 0 }}\r\n          transition={{ duration: 0.2, ease: \"easeInOut\" }}\r\n          className=\"overflow-hidden border rounded-md bg-muted absolute px-1.5 py-0.5 bottom-full mb-2 z-10 origin-left text-sm\"\r\n        >\r\n          {title}\r\n        </motion.div>}\r\n\r\n      </AnimatePresence>\r\n\r\n    </motion.div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n",
      "type": "registry:component"
    },
    {
      "path": "components/demo/stopwatch-demo.tsx",
      "content": "'use client';\n\nimport {Stopwatch} from '@/components/stopwatch';\n\nexport function StopwatchDemo() {\n  return (\n    <div>\n      <Stopwatch />\n    </div>\n  );\n}\n\n//Creator - Parth Arora\n//X - https://x.com/partharora9128\n\n",
      "type": "registry:component"
    }
  ]
}